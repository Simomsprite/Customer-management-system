<include file="Public:headerm"/>
<div class="wrap-box">
    <header class="abe-header am-header-default"> <a href="javascript:goIndex();" class="return iconfont">&#xe612;</a>
        <h1 class="abe-header-title">联系人编辑</h1>
    </header>
    <form class="form-horizontal" action="{:U('Contactsm/edit')}" method="post" id="form" role="form">
        <input type="hidden" name="contacts_id" id="contacts_id" value="{$contacts.contacts_id}"/>
        <input type="hidden" name="refer_url" value="{$refer_url}"/>
        <ul class="cust-form">
            <volist name="field_list['main']" id="vo" key="key"><!-- 主要字段 -->
                <li class="titbox">
                    <span class="tit">{$vo.name}：<if condition="($vo.is_null eq '1' && $vo.is_validate eq '1') || $vo.is_unique eq '1'"><em class="abe-red">*</em></if></span>
                    <if condition="$vo['form_type'] == 'address'">
                        <if condition = "$vo['tip_start'] eq 1">
                            <div class="col-md-7">
                                {$vo.html}
                            </div>
                            <div class="col-md-1"></div>
                            <else/>
                            <div class="col-md-8">
                                {$vo.html}
                            </div>
                        </if>
                        <else/>
                        <div class="col-md-6">
                            {$vo.html}
                        </div>
                        <if condition = "$vo['tip_start'] eq 1">
                            <div class="col-md-2"></div>
                            <else/>
                            <div class="col-md-2"></div>
                        </if>
                    </if>
                </li>
            </volist>
            <volist name="field_list['data']" id="vo" key="key"><!-- 附加字段 -->
                <php>if($vo['in_add']){</php>
                <li class="titbox">
                    <span class="tit">{$vo.name}：<if condition="($vo.is_null eq '1' && $vo.is_validate eq '1') || $vo.is_unique eq '1'"><em class="abe-red">*</em></if></span>
                    <if condition="$vo['form_type'] == 'address'">
                        <if condition = "$vo['tip_start'] eq 1">
                            <div class="col-md-7">
                                {$vo.html}
                            </div>
                            <div class="col-md-1"><span style="color: red;line-height: 32px;margin-left: 10px;">*</span></div>
                            <else/>
                            <div class="col-md-8">
                                {$vo.html}
                            </div>
                        </if>
                        <else/>
                        <div class="col-md-6">
                            {$vo.html}
                        </div>
                        <if condition = "$vo['tip_start'] eq 1">
                            <div class="col-md-2"><span style="color: red;line-height: 32px;margin-left: 10px;">*</span></div>
                            <else/>
                            <div class="col-md-2"></div>
                        </if>
                    </if>
                </li>
                <php>}</php>
            </volist>
        </ul>
        <div class="sub-box">
            <input type="button" value="取消" onclick="goIndex()" name="button" class="pbtn pbtn-sm pbtnw30p mrg_15"/>
            <input type="submit" value="确定"  class="pbtn  pbtnw30p pbtn-sm" onclick="return myValidate()">
        </div>
    </form>
</div>
</div>
<script>
    function goIndex(){
        showtab(3,'是否退出编辑联系人')
    }

    function　closetab(){
        window.location.href="javascript:history.go(-1);";
    }

    function myValidate(){
        let mobile=$("#telephone").val();
        let phoneReg = /^1(3|4|5|6|7|8|9)\d{9}$/;
        let qq=$("#qq_no").val();
        let qqReg = /^[1-9]\d{4,9}$/;
        let email=$("#email").val();
        let emailReg=/^(\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)?$/;
        if(mobile!="" && !phoneReg.test(mobile)) {
            showtab1(2,"手机格式不正确");
            return false;
        }else if (qq!="" && !qqReg.test(qq)) {
            showtab1(2,"qq格式不正确");
            return false;
        }else if (email!="" && !emailReg.test(email)){
            showtab1(2,"email格式不正确");
            return false;
        }
    }
</script>

</body>
</html>
